load("C:/Users/Joshua/Git/threela/analysis/stockpredict/svm_alldata.Rdata")
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid > 20101231 and timeid< 20121231 and diff=30")
vd.30=fetch(rs, n=-1)
vd.30$StockId = factor(vd.30$StockId)
vd.30$Diff = factor(vd.30$Diff)
vd.30$growClass = factor(vd.30$growClass)
vd.30$TimeId= as.Date(as.character(vd.30$TimeId),format="%Y%m%d")
mydb = dbConnect(MySQL(), user='threela', password='123456', dbname='threela', host='127.0.0.1')
library("RMySQL", lib.loc="~/R/win-library/3.2")
mydb = dbConnect(MySQL(), user='threela', password='123456', dbname='threela', host='127.0.0.1')
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid > 20101231 and timeid< 20121231 and diff=30")
vd.30=fetch(rs, n=-1)
vd.30$StockId = factor(vd.30$StockId)
vd.30$Diff = factor(vd.30$Diff)
vd.30$growClass = factor(vd.30$growClass)
vd.30$TimeId= as.Date(as.character(vd.30$TimeId),format="%Y%m%d")
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid > 20101231 and timeid< 20121231 and diff=90")
vd.90=fetch(rs, n=-1)
vd.90$StockId = factor(vd.90$StockId)
vd.90$Diff = factor(vd.90$Diff)
vd.90$growClass = factor(vd.90$growClass)
vd.90$TimeId= as.Date(as.character(vd.90$TimeId),format="%Y%m%d")
#validate data 180
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid > 20101231 and timeid< 20121231 and diff=180")
vd.180=fetch(rs, n=-1)
vd.180$StockId = factor(vd.180$StockId)
vd.180$Diff = factor(vd.180$Diff)
vd.180$growClass = factor(vd.180$growClass)
vd.180$TimeId= as.Date(as.character(vd.180$TimeId),format="%Y%m%d")
save(vd.180,file="vd_180.Rdata")
save(vd.90,file="vd_90.Rdata")
save(vd.30,file="vd_30.Rdata")
install.packages("RMySQL")
library("e1071", lib.loc="C:/Program Files/R/R-3.2.1/library")
?predict
?predict.svm
vd.30.attr==subset(vd.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.30.attr=subset(vd.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.30.class=vd.30$growClass
prediction<- predict.svm(model,vd.30.attr)
prediction<- predict(model,vd.30.attr)
table(prediction,vd.30.class)
?table
load("C:/Users/Joshua/Git/threela/analysis/stockpredict/train30.Rdata")
load("C:/Users/Joshua/Git/threela/analysis/stockpredict/train90.Rdata")
load("C:/Users/Joshua/Git/threela/analysis/stockpredict/train180.Rdata")
train.30.attr=subset(train.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
train.90.attr=subset(train.90,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
train.180.attr=subset(train.180,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
model.30=svm(growClass ~ .,data=train.30.attr)
model.90=svm(growClass ~ .,data=train.90.attr)
model.180=svm(growClass ~ .,data=train.180.attr)
table(prediction,vd.30.class)
vd.30.attr=subset(vd.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.30.class=vd.30$growClass
vd.90.attr=subset(vd.90,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.90.class=vd.90$growClass
vd.180.attr=subset(vd.180,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.180.class=vd.180$growClass
prediction<- predict.svm(model.30,vd.30.attr)
prediction<- predict(model.30,vd.30.attr)
library("e1071", lib.loc="~/R/win-library/3.2")
prediction<- predict(model.30,vd.30.attr)
library("party", lib.loc="~/R/win-library/3.2")
table(prediction,vd.30.class)
save(model.30,file='svm_model_30.Rdata')
save(model.90,file='svm_model_90.Rdata')
save(model.180,file='svm_model_180.Rdata')
predict.30=predict(model.30,vd.30.attr)
predict.90=predict(model.90,vd.90.attr)
predict.180=predict(model.180,vd.180.attr)
table(predict.30,vd.30.class)
table(predict.90,vd.90.class)
table(predict.180,vd.180.class)
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid < 20101231")
trainingdata=fetch(rs, n=-1)
trainingdata$StockId = factor(trainingdata$StockId)
trainingdata$Diff = factor(trainingdata$Diff)
trainingdata$growClass = factor(trainingdata$growClass)
trainingdata$TimeId= as.Date(as.character(trainingdata$TimeId),format="%Y%m%d")
save(trainingdata,data='train.sea.all.Rdata')
library("RMySQL", lib.loc="~/R/win-library/3.2")
mydb = dbConnect(MySQL(), user='threela', password='123456', dbname='threela', host='127.0.0.1')
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid < 20101231")
trainingdata=fetch(rs, n=-1)
trainingdata$StockId = factor(trainingdata$StockId)
trainingdata$Diff = factor(trainingdata$Diff)
trainingdata$growClass = factor(trainingdata$growClass)
trainingdata$TimeId= as.Date(as.character(trainingdata$TimeId),format="%Y%m%d")
save(trainingdata,data='train.sea.all.Rdata')
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid < 20101231")
train.sea.all=fetch(rs, n=-1)
train.sea.all$StockId = factor(train.sea.all$StockId)
train.sea.all$Diff = factor(train.sea.all$Diff)
train.sea.all$growClass = factor(train.sea.all$growClass)
train.sea.all$TimeId= as.Date(as.character(train.sea.all$TimeId),format="%Y%m%d")
save(train.sea.all,file='train.sea.all.Rdata')
load("E:/GIT/threela/analysis/stockpredict/svm_alldata.Rdata")
load("E:/GIT/threela/analysis/stockpredict/svm_alldata.Rdata")
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid < 20101231")
train.all=fetch(rs, n=-1)
train.all$StockId = factor(train.all$StockId)
train.all$Diff = factor(train.all$Diff)
train.all$growClass = factor(train.all$growClass)
train.all$TimeId= as.Date(as.character(train.all$TimeId),format="%Y%m%d")
save(train.all,file='train.all.Rdata')
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid < 20101231 and diff=30")
train.sea.30=fetch(rs, n=-1)
train.sea.30$StockId = factor(train.sea.30$StockId)
train.sea.30$Diff = factor(train.sea.30$Diff)
train.sea.30$growClass = factor(train.sea.30$growClass)
train.sea.30$TimeId= as.Date(as.character(train.sea.30$TimeId),format="%Y%m%d")
save(train.sea.30,file='train.sea.30.Rdata')
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid < 20101231 and diff=90")
train.sea.90=fetch(rs, n=-1)
train.sea.90$StockId = factor(train.sea.90$StockId)
train.sea.90$Diff = factor(train.sea.90$Diff)
train.sea.90$growClass = factor(train.sea.90$growClass)
train.sea.90$TimeId= as.Date(as.character(train.sea.90$TimeId),format="%Y%m%d")
save(train.sea.90,file='train.sea.90.Rdata')
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid < 20101231 and diff=180")
train.sea.180=fetch(rs, n=-1)
train.sea.180$StockId = factor(train.sea.180$StockId)
train.sea.180$Diff = factor(train.sea.180$Diff)
train.sea.180$growClass = factor(train.sea.180$growClass)
train.sea.180$TimeId= as.Date(as.character(train.sea.180$TimeId),format="%Y%m%d")
save(train.sea.180,file='train.sea.180.Rdata')
#raw data diff=180day
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid < 20101231 and diff=180")
train.sea.180=fetch(rs, n=-1)
train.sea.180$StockId = factor(train.sea.180$StockId)
train.sea.180$Diff = factor(train.sea.180$Diff)
train.sea.180$growClass = factor(train.sea.180$growClass)
train.sea.180$TimeId= as.Date(as.character(train.sea.180$TimeId),format="%Y%m%d")
save(train.sea.180,file='train.sea.180.Rdata')
#validate data 30
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid > 20101231 and timeid< 20121231 and diff=30")
vd.sea.30=fetch(rs, n=-1)
vd.sea.30$StockId = factor(vd.sea.30$StockId)
vd.sea.30$Diff = factor(vd.sea.30$Diff)
vd.sea.30$growClass = factor(vd.sea.30$growClass)
vd.sea.30$TimeId= as.Date(as.character(vd.sea.30$TimeId),format="%Y%m%d")
vd.sea.30=subset(vd.sea.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.sea.30=vd.sea.30$growClass
save(vd.sea.30,file='vd.sea.30.Rdata')
#validate data 90
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid > 20101231 and timeid< 20121231 and diff=90")
vd.sea.90=fetch(rs, n=-1)
vd.sea.90$StockId = factor(vd.sea.90$StockId)
vd.sea.90$Diff = factor(vd.sea.90$Diff)
vd.sea.90$growClass = factor(vd.sea.90$growClass)
vd.sea.90$TimeId= as.Date(as.character(vd.sea.90$TimeId),format="%Y%m%d")
vd.sea.90=subset(vd.sea.90,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.sea.90=vd.sea.90$growClass
save(vd.sea.90,file='vd.sea.90.Rdata')
#validate data 180
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid > 20101231 and timeid< 20121231 and diff=180")
vd.sea.180=fetch(rs, n=-1)
vd.sea.180$StockId = factor(vd.sea.180$StockId)
vd.sea.180$Diff = factor(vd.sea.180$Diff)
vd.sea.180$growClass = factor(vd.sea.180$growClass)
vd.sea.180$TimeId= as.Date(as.character(vd.sea.180$TimeId),format="%Y%m%d")
vd.sea.180=subset(vd.sea.180,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.sea.180=vd.sea.180$growClass
save(vd.sea.180,file='vd.sea.180.Rdata')
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid > 20101231 and timeid< 20121231 and diff=30")
vd.sea.30=fetch(rs, n=-1)
vd.sea.30$StockId = factor(vd.sea.30$StockId)
vd.sea.30$Diff = factor(vd.sea.30$Diff)
vd.sea.30$growClass = factor(vd.sea.30$growClass)
vd.sea.30$TimeId= as.Date(as.character(vd.sea.30$TimeId),format="%Y%m%d")
vd.sea.30=subset(vd.sea.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.sea.30=vd.sea.30$growClass
save(vd.sea.30,file='vd.sea.30.Rdata')
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid > 20101231 and timeid< 20121231 and diff=30")
vd.sea.30=fetch(rs, n=-1)
vd.sea.30$StockId = factor(vd.sea.30$StockId)
vd.sea.30$Diff = factor(vd.sea.30$Diff)
vd.sea.30$growClass = factor(vd.sea.30$growClass)
vd.sea.30$TimeId= as.Date(as.character(vd.sea.30$TimeId),format="%Y%m%d")
vd.sea.30.attr=subset(vd.sea.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.sea.30.class=vd.sea.30$growClass
View(vd.90.attr)
save(vd.sea.30,file='vd.sea.30.Rdata')
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid > 20101231 and timeid< 20121231 and diff=90")
vd.sea.90=fetch(rs, n=-1)
vd.sea.90$StockId = factor(vd.sea.90$StockId)
vd.sea.90$Diff = factor(vd.sea.90$Diff)
vd.sea.90$growClass = factor(vd.sea.90$growClass)
vd.sea.90$TimeId= as.Date(as.character(vd.sea.90$TimeId),format="%Y%m%d")
vd.sea.90.attr=subset(vd.sea.90,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.sea.90.class=vd.sea.90$growClass
save(vd.sea.90,file='vd.sea.90.Rdata')
rs= dbSendQuery(mydb, "select * from threela.fundmentalrawseason where timeid > 20101231 and timeid< 20121231 and diff=180")
vd.sea.180=fetch(rs, n=-1)
vd.sea.180$StockId = factor(vd.sea.180$StockId)
vd.sea.180$Diff = factor(vd.sea.180$Diff)
vd.sea.180$growClass = factor(vd.sea.180$growClass)
vd.sea.180$TimeId= as.Date(as.character(vd.sea.180$TimeId),format="%Y%m%d")
vd.sea.180.attr=subset(vd.sea.180,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.sea.180.class=vd.sea.180$growClass
save(vd.sea.180,file='vd.sea.180.Rdata')
table(predict.180,vd.180.class)
table(predict.90,vd.90.class)
table(predict.180,vd.180.class)
rm(model)
rm(prediction)
rm(predict.180,predict.30,predict.90)
rm(predict.180,predict.30,predict.90)
rm(train.all)
rm(train.30,train.90,train.180)
train.sea.30.attr=subset(train.sea.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
train.sea.90.attr=subset(train.sea.90,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
train.sea.180.attr=subset(train.sea.180,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
View(trainingdata)
rm(trainingdata)
summary(train.sea.30)
summary(train.sea.30)
