load("C:/Users/Joshua/Git/threela/analysis/stockpredict/svm_alldata.Rdata")
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid > 20101231 and timeid< 20121231 and diff=30")
vd.30=fetch(rs, n=-1)
vd.30$StockId = factor(vd.30$StockId)
vd.30$Diff = factor(vd.30$Diff)
vd.30$growClass = factor(vd.30$growClass)
vd.30$TimeId= as.Date(as.character(vd.30$TimeId),format="%Y%m%d")
mydb = dbConnect(MySQL(), user='threela', password='123456', dbname='threela', host='127.0.0.1')
library("RMySQL", lib.loc="~/R/win-library/3.2")
mydb = dbConnect(MySQL(), user='threela', password='123456', dbname='threela', host='127.0.0.1')
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid > 20101231 and timeid< 20121231 and diff=30")
vd.30=fetch(rs, n=-1)
vd.30$StockId = factor(vd.30$StockId)
vd.30$Diff = factor(vd.30$Diff)
vd.30$growClass = factor(vd.30$growClass)
vd.30$TimeId= as.Date(as.character(vd.30$TimeId),format="%Y%m%d")
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid > 20101231 and timeid< 20121231 and diff=90")
vd.90=fetch(rs, n=-1)
vd.90$StockId = factor(vd.90$StockId)
vd.90$Diff = factor(vd.90$Diff)
vd.90$growClass = factor(vd.90$growClass)
vd.90$TimeId= as.Date(as.character(vd.90$TimeId),format="%Y%m%d")
#validate data 180
rs= dbSendQuery(mydb, "select * from threela.fundmentalraw where timeid > 20101231 and timeid< 20121231 and diff=180")
vd.180=fetch(rs, n=-1)
vd.180$StockId = factor(vd.180$StockId)
vd.180$Diff = factor(vd.180$Diff)
vd.180$growClass = factor(vd.180$growClass)
vd.180$TimeId= as.Date(as.character(vd.180$TimeId),format="%Y%m%d")
save(vd.180,file="vd_180.Rdata")
save(vd.90,file="vd_90.Rdata")
save(vd.30,file="vd_30.Rdata")
install.packages("RMySQL")
library("e1071", lib.loc="C:/Program Files/R/R-3.2.1/library")
?predict
?predict.svm
vd.30.attr==subset(vd.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.30.attr=subset(vd.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate))
vd.30.class=vd.30$growClass
prediction<- predict.svm(model,vd.30.attr)
prediction<- predict(model,vd.30.attr)
table(prediction,vd.30.class)
?table
load("C:/Users/Joshua/Git/threela/analysis/stockpredict/train30.Rdata")
load("C:/Users/Joshua/Git/threela/analysis/stockpredict/train90.Rdata")
load("C:/Users/Joshua/Git/threela/analysis/stockpredict/train180.Rdata")
train.30.attr=subset(train.30,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
train.90.attr=subset(train.90,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
train.180.attr=subset(train.180,select=c(YieldRate,PE,PBR,EPS,DebtRatio,ROE,MonthRate,YearRate,growClass))
model.30=svm(growClass ~ .,data=train.30.attr)
model.90=svm(growClass ~ .,data=train.90.attr)
model.180=svm(growClass ~ .,data=train.180.attr)
